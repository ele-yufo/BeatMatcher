# BeatMatcher 宽松配置文件 - 用于提高匹配率

# 日志配置
logging:
  level: "INFO"
  file: "logs/beatmatcher.log"
  format: "{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} | {message}"
  rotation: "10 MB"
  retention: "7 days"

# BeatSaver API 配置
beatsaver:
  base_url: "https://api.beatsaver.com"
  search_endpoint: "/search/text"
  download_endpoint: "/download/key/{id}"
  request_delay: 1.0
  max_retries: 3
  timeout: 30
  user_agent: "BeatMatcher/1.0"

# 宽松匹配配置
matching:
  # 匹配权重 - 更注重标题匹配
  artist_weight: 0.3
  title_weight: 0.7
  
  # 大幅降低相似度阈值
  minimum_similarity: 0.4  # 从0.7降低到0.4
  
  # 字符串预处理
  normalize_case: true
  remove_special_chars: true
  
  # 降低模糊匹配阈值
  fuzzy_ratio_threshold: 60  # 从80降低到60

# 极度宽松的推荐评分配置
scoring:
  # 评分权重 - 降低质量要求的影响
  download_count_weight: 0.1  # 从0.3降低到0.1
  rating_weight: 0.2          # 从0.4降低到0.2
  upvote_ratio_weight: 0.3    # 从0.2提升到0.3
  recency_weight: 0.4         # 从0.1大幅提升到0.4
  
  # 移除所有最小要求
  minimum_rating: 0.0         # 从0.5降低到0.0
  minimum_downloads: 0        # 从10降低到0

# 难度分析配置
difficulty:
  # 难度分类阈值保持不变
  categories:
    easy: 
      min: 0
      max: 4
      folder: "Easy (0-4 blocks/s)"
    
    medium:
      min: 4
      max: 7
      folder: "Medium (4-7 blocks/s)"
    
    hard:
      min: 7
      max: 999
      folder: "Hard (7+ blocks/s)"

# 文件处理配置
files:
  supported_audio_formats: 
    - ".mp3"
    - ".flac"
    - ".ogg"
    - ".wav"
    - ".m4a"
    - ".aac"
  
  download_timeout: 300
  max_concurrent_downloads: 3
  organize_by_difficulty: true
  preserve_original_structure: false

# 网络配置
network:
  connection_pool_size: 10
  connect_timeout: 10
  read_timeout: 30
  max_retries: 3
  retry_delay: 2.0
  backoff_factor: 2.0

# 性能配置
performance:
  max_concurrent_tasks: 5
  max_cache_size: 1000
  show_progress: true